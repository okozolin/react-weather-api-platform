(this["webpackJsonpclient-weather-alerts"]=this["webpackJsonpclient-weather-alerts"]||[]).push([[0],{70:function(e,t,n){},97:function(e,t,n){"use strict";n.r(t);var r=n(2),a=n(0),c=n.n(a),i=n(19),s=n.n(i),o=(n(70),n(11)),l=n.n(o),u=n(17),j=n(16),d=n(120),b=n(119),h=n(110),f=n(26),O=n.n(f),p=n(52),x=n.n(p);function g(){var e=Object(a.useState)(new Date),t=Object(j.a)(e,2),n=t[0],c=t[1];return Object(a.useEffect)((function(){var e=setInterval((function(){return c(new Date)}),1e3);return function(){clearInterval(e)}}),[]),Object(r.jsxs)(d.a,{display:"flex",alignItems:"center",justifyContent:"center",fontFamily:"Roboto Condensed",fontSize:56,p:4,bgcolor:"#06D6A0",color:"#073B4C",children:[Object(r.jsx)(O.a,{format:"DD/MM/YYYY HH:mm",children:n}),Object(r.jsxs)(d.a,{alignItems:"center",display:"flex",color:"#ce285d",children:[Object(r.jsx)(x.a,{fontSize:"large"}),Object(r.jsx)(h.a,{children:"oritkozolin"})]})]})}O.a.globalFormat="D MMM YYYY";var m=n(111),v=n(112),y=n(113),w=n(114),C=n(115),k=n(116),D=n(117),Y=n(118),F=n(54),S=n.n(F),I=n(55),T=n.n(I),M=n(23),E=n.n(M),H=n(53);n.n(H)()(E.a);var A=Object(m.a)({table:{minWidth:650}});function U(e){var t=e.alerts,n=A();return Object(r.jsx)(v.a,{component:y.a,children:Object(r.jsxs)(w.a,{className:n.table,children:[Object(r.jsx)(C.a,{children:Object(r.jsxs)(k.a,{children:[Object(r.jsx)(D.a,{children:"City"}),Object(r.jsx)(D.a,{align:"right",children:"Current Temprature"}),Object(r.jsx)(D.a,{align:"right",children:"Condition"}),Object(r.jsx)(D.a,{align:"right",children:"Last Triggered"}),Object(r.jsx)(D.a,{align:"right",children:"Duration"}),Object(r.jsx)(D.a,{align:"right",children:"Status"})]})}),Object(r.jsx)(Y.a,{children:t.length?t.map((function(e){return Object(r.jsxs)(k.a,{children:[Object(r.jsx)(D.a,{children:e.city}),Object(r.jsx)(D.a,{align:"right",children:e.currentTemp}),Object(r.jsx)(D.a,{align:"right",children:e.condition}),Object(r.jsx)(D.a,{align:"right",children:e.lastTriggered&&Object(r.jsx)(O.a,{format:"DD/MM/YYYY HH:mm",children:e.lastTriggered})}),Object(r.jsx)(D.a,{align:"right",children:e.duration?E.a.duration(e.duration).format("HH:mm:ss",{trim:!1}):null}),Object(r.jsx)(D.a,{align:"right",children:e.status?Object(r.jsx)(S.a,{style:{color:"red"}}):Object(r.jsx)(T.a,{style:{color:"#06D6A0"}})})]},e.city)})):null})]})})}var B=n(121),L=n(59),z=n.n(L),P=n(56),J=n(57),R=n(58),N=n.n(R).a.create({baseURL:"http://localhost:3000",headers:{"Content-type":"application/json"}}),V="succeeded",W=function(){function e(){Object(P.a)(this,e)}return Object(J.a)(e,null,[{key:"uploadFile",value:function(){var e=Object(u.a)(l.a.mark((function e(t){var n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=new FormData).append("file",t),e.prev=2,e.next=5,N.post("/upload",n,{headers:{"Content-Type":"multipart/form-data"}});case 5:return r=e.sent,e.abrupt("return",{data:r.data,status:V});case 9:throw e.prev=9,e.t0=e.catch(2),new Error(e.t0.message);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}()},{key:"getAlerts",value:function(){var e=Object(u.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,N.get("/alerts");case 3:return t=e.sent,e.abrupt("return",t);case 7:throw e.prev=7,e.t0=e.catch(0),new Error(e.t0.message);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}()}]),e}();function q(e){var t=e.setUploaded,n=Object(a.useState)(null),c=Object(j.a)(n,2),i=c[0],s=c[1];Object(a.useEffect)((function(){(function(){var e=Object(u.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!i){e.next=5;break}return e.next=3,W.uploadFile(i);case 3:e.sent.status===V?t(!0):(t(!1),console.log("Upload.js: Failed to load file"));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[i]);return Object(r.jsx)(d.a,{my:4,children:Object(r.jsxs)(B.a,{variant:"contained",component:"label",style:{backgroundColor:"#118AB2",color:"white"},startIcon:Object(r.jsx)(z.a,{}),children:["Upload CSV",Object(r.jsx)("input",{type:"file",hidden:!0,onChange:function(e){s(e.target.files[0])}})]})})}function G(e,t,n){var r;e&&(t(!0),(r=3e3,new Promise((function(e){return setTimeout(e,r)}))).then((function(){n(),t(!1)})))}var K=function(){var e=Object(a.useState)([]),t=Object(j.a)(e,2),n=t[0],c=t[1],i=Object(a.useState)(!1),s=Object(j.a)(i,2),o=s[0],h=s[1],f=Object(a.useState)(!1),O=Object(j.a)(f,2),p=O[0],x=O[1],m=!("object"===typeof n&&!Object.keys(n).length)&&o&&!p;return Object(a.useEffect)((function(){var e,t=function(){var e=Object(u.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o){e.next=5;break}return e.next=3,W.getAlerts();case 3:t=e.sent,c(t.data);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return G(o,x,t),e=setInterval((function(){return G(o,x,t)}),6e4),function(){clearInterval(e)}}),[o]),Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(g,{}),Object(r.jsxs)(d.a,{m:3,children:[Object(r.jsx)(q,{setUploaded:h}),Object(r.jsx)(d.a,{display:"flex",justifyContent:"center",alignItems:"center",m:4,children:p&&Object(r.jsx)(b.a,{})}),m&&Object(r.jsx)(U,{alerts:n})]})]})},Q=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,124)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,i=t.getTTFB;n(e),r(e),a(e),c(e),i(e)}))};s.a.render(Object(r.jsx)(c.a.StrictMode,{children:Object(r.jsx)(K,{})}),document.getElementById("root")),Q()}},[[97,1,2]]]);
//# sourceMappingURL=main.4447d32f.chunk.js.map